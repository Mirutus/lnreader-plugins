var e=this&&this.__awaiter||function(e,l,a,t){return new(a||(a=Promise))((function(r,i){function o(e){try{n(t.next(e))}catch(e){i(e)}}function u(e){try{n(t.throw(e))}catch(e){i(e)}}function n(e){var l;e.done?r(e.value):(l=e.value,l instanceof a?l:new a((function(e){e(l)}))).then(o,u)}n((t=t.apply(e,l||[])).next())}))},l=this&&this.__generator||function(e,l){var a,t,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=u(0),o.throw=u(1),o.return=u(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(u){return function(n){return function(u){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(i=0)),i;)try{if(a=1,t&&(r=2&u[0]?t.return:u[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,u[1])).done)return r;switch(t=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!r||u[1]>r[0]&&u[1]<r[3])){i.label=u[1];break}if(6===u[0]&&i.label<r[1]){i.label=r[1],r=u;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(u);break}r[2]&&i.ops.pop(),i.trys.pop();continue}u=l.call(e,i)}catch(e){u=[6,e],t=0}finally{a=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,n])}}};Object.defineProperty(exports,"__esModule",{value:!0});var a=require("@libs/fetch"),t=require("@libs/filterInputs"),r=require("cheerio"),i=require("@libs/defaultCover"),o=require("@libs/novelStatus"),u=function(){function u(){this.id="shanghaifantasy",this.name="Shanghai Fantasy",this.icon="src/en/shanghaifantasy/icon.png",this.site="https://shanghaifantasy.com/",this.version="1.0.2",this.imageRequestInit=void 0,this.filters={sort:{label:"Sort Results By",value:"",options:[{label:"Default",value:""},{label:"Title",value:"title"},{label:"Date Added",value:"date"}],type:t.FilterTypes.Picker},order:{label:"Order By",value:"desc",options:[{label:"Descending",value:"desc"},{label:"Ascending",value:"asc"}],type:t.FilterTypes.Picker},status:{label:"Status",value:"",options:[{label:"Default",value:""},{label:"Completed",value:"Completed"},{label:"Dropped",value:"Dropped"},{label:"Hiatus",value:"Hiatus"},{label:"Ongoing",value:"Ongoing"}],type:t.FilterTypes.Picker},genres:{label:"Genres",value:[],options:[{label:"1960s",value:"1960s"},{label:"1970",value:"1970"},{label:"1970s",value:"1970s"},{label:"1980s",value:"1980s"},{label:"1990s",value:"1990s"},{label:"A Lazy Yet Arrogant Bad Boy",value:"A+Lazy+Yet+Arrogant+Bad+Boy"},{label:"A Slightly Rebellious Good Girl",value:"A+Slightly+Rebellious+Good+Girl"},{label:"ABO",value:"ABO"},{label:"abuse",value:"abuse"},{label:"Action",value:"Action"},{label:"Actress",value:"Actress"},{label:"Adapted to drama",value:"Adapted+to+drama"},{label:"Adapted to Manhua",value:"Adapted+to+Manhua"},{label:"Adopted Children",value:"Adopted+Children"},{label:"Adorable Baby",value:"Adorable+Baby"},{label:"Adoring husband",value:"Adoring+husband"},{label:"Adult",value:"Adult"},{label:"Adventure",value:"Adventure"},{label:"Age Gap",value:"Age+Gap"},{label:"Alchemy",value:"Alchemy"},{label:"Alternate World",value:"Alternate+World"},{label:"Amnesia",value:"Amnesia"},{label:"Ancient China",value:"Ancient+China"},{label:"Ancient Chinese tales",value:"Ancient+Chinese+tales"},{label:"Ancient Romance",value:"Ancient+Romance"},{label:"Ancient Times",value:"Ancient+Times"},{label:"Angst",value:"Angst"},{label:"Apocalypse",value:"Apocalypse"},{label:"Aristocratic Family",value:"Aristocratic+Family"},{label:"Army",value:"Army"},{label:"Arranged Marriage",value:"Arranged+Marriage"},{label:"Arranged Marriage Before Love",value:"Arranged+Marriage+Before+Love"},{label:"Artist",value:"Artist"},{label:"Artists",value:"Artists"},{label:"Bad Boy’s Rise",value:"Bad+Boy’s+Rise"},{label:"beast",value:"beast"},{label:"Beast Taming",value:"Beast+Taming"},{label:"Beastmen",value:"Beastmen"},{label:"Beautiful Female Lead",value:"Beautiful+Female+Lead"},{label:"Beautiful protagonist",value:"Beautiful+protagonist"},{label:"BG",value:"BG"},{label:"Bickering Couple",value:"Bickering+Couple"},{label:"BL",value:"BL"},{label:"Brotherhood",value:"Brotherhood"},{label:"Business management",value:"Business+management"},{label:"Businessmen",value:"Businessmen"},{label:"Bussiness",value:"Bussiness"},{label:"Card Game",value:"Card+Game"},{label:"caring protagonist",value:"caring+protagonist"},{label:"Celebrities",value:"Celebrities"},{label:"celebrity",value:"celebrity"},{label:"CEO",value:"CEO"},{label:"CEO Sweet Pet",value:"CEO+Sweet+Pet"},{label:"Chaebol CEO",value:"Chaebol+CEO"},{label:"Chaebol Family",value:"Chaebol+Family"},{label:"Character Growth",value:"Character+Growth"},{label:"Charming Protagonist",value:"Charming+Protagonist"},{label:"Cheat",value:"Cheat"},{label:"Childbirth",value:"Childbirth"},{label:"Childcare",value:"Childcare"},{label:"Childhood Friends",value:"Childhood+Friends"},{label:"Childhood Love",value:"Childhood+Love"},{label:"cohabitation",value:"cohabitation"},{label:"cold male protagonist",value:"cold+male+protagonist"},{label:"come",value:"come"},{label:"comedic undertone",value:"comedic+undertone"},{label:"Comedy",value:"Comedy"},{label:"Committed Suicide",value:"Committed+Suicide"},{label:"Completed",value:"Completed"},{label:"Contract Marriage",value:"Contract+Marriage"},{label:"Cooking",value:"Cooking"},{label:"Countryside",value:"Countryside"},{label:"Court Intrigue",value:"Court+Intrigue"},{label:"crazy couple",value:"crazy+couple"},{label:"Crime",value:"Crime"},{label:"Crime Investigation",value:"Crime+Investigation"},{label:"Crossing",value:"Crossing"},{label:"Cub Rearing",value:"Cub+Rearing"},{label:"Cultivation",value:"Cultivation"},{label:"cunning",value:"cunning"},{label:"cute baby",value:"cute+baby"},{label:"Cute Child",value:"Cute+Child"},{label:"Cute Children",value:"Cute+Children"},{label:"cute pet",value:"cute+pet"},{label:"Cute Protagonist",value:"Cute+Protagonist"},{label:"Cute Story",value:"Cute+Story"},{label:"Cute treasure",value:"Cute+treasure"},{label:"Cyberpunk",value:"Cyberpunk"},{label:"Daily Group Portrait",value:"Daily+Group+Portrait"},{label:"Daily Life",value:"Daily+Life"},{label:"Daily Pampering",value:"Daily+Pampering"},{label:"Death",value:"Death"},{label:"Delicate Beauty",value:"Delicate+Beauty"},{label:"Demon",value:"Demon"},{label:"Detective",value:"Detective"},{label:"Devoted Love Interest",value:"Devoted+Love+Interest"},{label:"Devoted Male Lead",value:"Devoted+Male+Lead"},{label:"Dimensional trade",value:"Dimensional+trade"},{label:"disabilities",value:"disabilities"},{label:"Disguising",value:"Disguising"},{label:"Divine Doctor",value:"Divine+Doctor"},{label:"Divorce",value:"Divorce"},{label:"Doctor",value:"Doctor"},{label:"Dominant CEO",value:"Dominant+CEO"},{label:"Doting Brothers",value:"Doting+Brothers"},{label:"Doting Husband",value:"Doting+Husband"},{label:"Doting Love Interest",value:"Doting+Love+Interest"},{label:"double male lead",value:"double+male+lead"},{label:"Double Rebirth",value:"Double+Rebirth"},{label:"Drama",value:"Drama"},{label:"Dramatic Tension",value:"Dramatic+Tension"},{label:"Dramatic woman",value:"Dramatic+woman"},{label:"Dual-World Travel",value:"Dual-World+Travel"},{label:"Dungeon Core",value:"Dungeon+Core"},{label:"Dungeons",value:"Dungeons"},{label:"Ecchi",value:"Ecchi"},{label:"Educated Youth",value:"Educated+Youth"},{label:"Elite Family",value:"Elite+Family"},{label:"Emotional",value:"Emotional"},{label:"Empress",value:"Empress"},{label:"Entertainment",value:"Entertainment"},{label:"Entertainment Industry",value:"Entertainment+Industry"},{label:"Era",value:"Era"},{label:"Era Farming",value:"Era+Farming"},{label:"Escape from Marriage",value:"Escape+from+Marriage"},{label:"Esports",value:"Esports"},{label:"Face-Slapping",value:"Face-Slapping"},{label:"Fake vs. Real Heiress",value:"Fake+vs.+Real+Heiress"},{label:"Familial Love",value:"Familial+Love"},{label:"Family",value:"Family"},{label:"Family conflict",value:"Family+conflict"},{label:"Family Drama",value:"Family+Drama"},{label:"family feuds",value:"family+feuds"},{label:"Family Saga",value:"Family+Saga"},{label:"Fanfiction",value:"Fanfiction"},{label:"Fantasy",value:"Fantasy"},{label:"Fantasy Magic",value:"Fantasy+Magic"},{label:"Fantasy Romance",value:"Fantasy+Romance"},{label:"Farming",value:"Farming"},{label:"Fated Lovers",value:"Fated+Lovers"},{label:"Female Antagonist",value:"Female+Antagonist"},{label:"Female Lead",value:"Female+Lead"},{label:"Female Protagonist",value:"Female+Protagonist"},{label:"Female Pursues male",value:"Female+Pursues+male"},{label:"Female Romance",value:"Female+Romance"},{label:"Female Supremacy",value:"Female+Supremacy"},{label:"Fiction",value:"Fiction"},{label:"first love",value:"first+love"},{label:"Fishing",value:"Fishing"},{label:"Flash Marriage",value:"Flash+Marriage"},{label:"Food",value:"Food"},{label:"Forced Marriage",value:"Forced+Marriage"},{label:"Forced Proximity Trope",value:"Forced+Proximity+Trope"},{label:"Fortune telling",value:"Fortune+telling"},{label:"Free",value:"Free"},{label:"futuristic setting",value:"futuristic+setting"},{label:"Game",value:"Game"},{label:"Game World",value:"Game+World"},{label:"Gangster",value:"Gangster"},{label:"Gangster boss",value:"Gangster+boss"},{label:"Gender Bender",value:"Gender+Bender"},{label:"Genius",value:"Genius"},{label:"genius stream",value:"genius+stream"},{label:"GL",value:"GL"},{label:"Godly Power",value:"Godly+Power"},{label:"Gourmet Food",value:"Gourmet+Food"},{label:"handsome male lead",value:"handsome+male+lead"},{label:"happy ending",value:"happy+ending"},{label:"Harem",value:"Harem"},{label:"HE",value:"HE"},{label:"Heartwarming",value:"Heartwarming"},{label:"Hidden Identities",value:"Hidden+Identities"},{label:"Historical",value:"Historical"},{label:"Historical Fiction",value:"Historical+Fiction"},{label:"Historical Romance",value:"Historical+Romance"},{label:"Historical Time",value:"Historical+Time"},{label:"Hoarding",value:"Hoarding"},{label:"Horror",value:"Horror"},{label:"House Fight",value:"House+Fight"},{label:"House Fighting",value:"House+Fighting"},{label:"Humor",value:"Humor"},{label:"Inferiority Complex",value:"Inferiority+Complex"},{label:"Innocent",value:"Innocent"},{label:"Interstellar",value:"Interstellar"},{label:"Investigation",value:"Investigation"},{label:"Isekai",value:"Isekai"},{label:"Josei",value:"Josei"},{label:"Kind Love Interests",value:"Kind+Love+Interests"},{label:"large age gap",value:"large+age+gap"},{label:"Light Read",value:"Light+Read"},{label:"Light-hearted",value:"Light-hearted"},{label:"lighthearted.",value:"lighthearted."},{label:"live broadcast",value:"live+broadcast"},{label:"Livestream",value:"Livestream"},{label:"livestreaming",value:"livestreaming"},{label:"love",value:"love"},{label:"Love After Marriage",value:"Love+After+Marriage"},{label:"love and marriage",value:"love+and+marriage"},{label:"love at first sight",value:"love+at+first+sight"},{label:"love over time",value:"love+over+time"},{label:"Love triangle",value:"Love+triangle"},{label:"Love-Hate Relationship",value:"Love-Hate+Relationship"},{label:"Loving Parents",value:"Loving+Parents"},{label:"Lucky Protagonist",value:"Lucky+Protagonist"},{label:"Mafia",value:"Mafia"},{label:"Magic",value:"Magic"},{label:"Magical",value:"Magical"},{label:"magical space",value:"magical+space"},{label:"Male Protagonist",value:"Male+Protagonist"},{label:"Marquis",value:"Marquis"},{label:"Marriage",value:"Marriage"},{label:"Marriage Before Love",value:"Marriage+Before+Love"},{label:"Martial Arts",value:"Martial+Arts"},{label:"Mature",value:"Mature"},{label:"Mecha",value:"Mecha"},{label:"medical skills",value:"medical+skills"},{label:"Medicine",value:"Medicine"},{label:"Melodrama",value:"Melodrama"},{label:"memories",value:"memories"},{label:"META",value:"META"},{label:"Metaphysics",value:"Metaphysics"},{label:"Military",value:"Military"},{label:"Military Husband",value:"Military+Husband"},{label:"Military Marriage",value:"Military+Marriage"},{label:"Military Romance",value:"Military+Romance"},{label:"Military Strategy",value:"Military+Strategy"},{label:"Military Wedding",value:"Military+Wedding"},{label:"Military Wife",value:"Military+Wife"},{label:"mind reading",value:"mind+reading"},{label:"Mistreated Child",value:"Mistreated+Child"},{label:"Misunderstanding",value:"Misunderstanding"},{label:"Modern",value:"Modern"},{label:"Modern Day",value:"Modern+Day"},{label:"modern love",value:"modern+love"},{label:"Modern Romance",value:"Modern+Romance"},{label:"Monster",value:"Monster"},{label:"Mpreg",value:"Mpreg"},{label:"Multiple Identities",value:"Multiple+Identities"},{label:"Mute Character",value:"Mute+Character"},{label:"Mutual Purity",value:"Mutual+Purity"},{label:"Mystery",value:"Mystery"},{label:"Mythical Beasts",value:"Mythical+Beasts"},{label:"Near-Death Experience",value:"Near-Death+Experience"},{label:"No CP",value:"No+CP"},{label:"Novel Transmigration",value:"Novel+Transmigration"},{label:"Obsessive Love",value:"Obsessive+Love"},{label:"Office Romance",value:"Office+Romance"},{label:"Older Love Interests",value:"Older+Love+Interests"},{label:"omegaverse",value:"omegaverse"},{label:"Online Romance",value:"Online+Romance"},{label:"orphans",value:"orphans"},{label:"Palace",value:"Palace"},{label:"palace fighting",value:"palace+fighting"},{label:"Palace Intrigue",value:"Palace+Intrigue"},{label:"Pampering Wife",value:"Pampering+Wife"},{label:"Paralyzed",value:"Paralyzed"},{label:"Period",value:"Period"},{label:"Period Novel",value:"Period+Novel"},{label:"Persistent love interest",value:"Persistent+love+interest"},{label:"Pets",value:"Pets"},{label:"Poor to rich",value:"Poor+to+rich"},{label:"Possessive",value:"Possessive"},{label:"Post-Apocalyptic",value:"Post-Apocalyptic"},{label:"Power Couple",value:"Power+Couple"},{label:"power struggle",value:"power+struggle"},{label:"pregnancy",value:"pregnancy"},{label:"Protagonist fall in love first",value:"Protagonist+fall+in+love+first"},{label:"Protagonist strong from the start",value:"Protagonist+strong+from+the+start"},{label:"Psychological",value:"Psychological"},{label:"pure love",value:"pure+love"},{label:"Quick transmigration",value:"Quick+transmigration"},{label:"Rags to Riches",value:"Rags+to+Riches"},{label:"rape",value:"rape"},{label:"Rebirth",value:"Rebirth"},{label:"Reborn",value:"Reborn"},{label:"Redemption",value:"Redemption"},{label:"Regretful Pursuit",value:"Regretful+Pursuit"},{label:"reincarnation",value:"reincarnation"},{label:"Reunion",value:"Reunion"},{label:"Revenge",value:"Revenge"},{label:"Reversible couple",value:"Reversible+couple"},{label:"Rich CEO",value:"Rich+CEO"},{label:"Rich Family",value:"Rich+Family"},{label:"Romance",value:"Romance"},{label:"Romantic Drama",value:"Romantic+Drama"},{label:"Royal Family",value:"Royal+Family"},{label:"Rural",value:"Rural"},{label:"Rural life",value:"Rural+life"},{label:"Sadomasochism",value:"Sadomasochism"},{label:"SameSexMarriage",value:"SameSexMarriage"},{label:"Scheming",value:"Scheming"},{label:"Scholar",value:"Scholar"},{label:"School Life",value:"School+Life"},{label:"Sci-fi",value:"Sci-fi"},{label:"Second Chance",value:"Second+Chance"},{label:"Second Love",value:"Second+Love"},{label:"Secret Crush",value:"Secret+Crush"},{label:"Secret Identity",value:"Secret+Identity"},{label:"Secret Love",value:"Secret+Love"},{label:"Shameles Protagonist",value:"Shameles+Protagonist"},{label:"Shameless Forced Possession",value:"Shameless+Forced+Possession"},{label:"Short Story",value:"Short+Story"},{label:"Shoujo",value:"Shoujo"},{label:"Shoujo Ai",value:"Shoujo+Ai"},{label:"Shounen",value:"Shounen"},{label:"Shounen Ai",value:"Shounen+Ai"},{label:"Showbiz",value:"Showbiz"},{label:"sisterVSbrother",value:"sisterVSbrother"},{label:"Slice of Life",value:"Slice+of+Life"},{label:"Slightly BL",value:"Slightly+BL"},{label:"Slow Burn",value:"Slow+Burn"},{label:"slow romance",value:"slow+romance"},{label:"Slow-burn Romance",value:"Slow-burn+Romance"},{label:"Smart Couple",value:"Smart+Couple"},{label:"Smart Protagonist",value:"Smart+Protagonist"},{label:"Smut",value:"Smut"},{label:"Social Status",value:"Social+Status"},{label:"Soldier",value:"Soldier"},{label:"Space",value:"Space"},{label:"Space Ability",value:"Space+Ability"},{label:"Space Supplies",value:"Space+Supplies"},{label:"Space System",value:"Space+System"},{label:"Sports",value:"Sports"},{label:"Straight Seme",value:"Straight+Seme"},{label:"Straight Uke",value:"Straight+Uke"},{label:"Straight- Gay",value:"Straight-+Gay"},{label:"Strong Female Lead",value:"Strong+Female+Lead"},{label:"Strong Lead",value:"Strong+Lead"},{label:"Strong Love Interest",value:"Strong+Love+Interest"},{label:"Strong to Stronger",value:"Strong+to+Stronger"},{label:"Supernatural",value:"Supernatural"},{label:"Supporting character",value:"Supporting+character"},{label:"Survival",value:"Survival"},{label:"Suspense",value:"Suspense"},{label:"suspenseful romance",value:"suspenseful+romance"},{label:"Sweet",value:"Sweet"},{label:"Sweet Doting",value:"Sweet+Doting"},{label:"sweet female protagonist",value:"sweet+female+protagonist"},{label:"Sweet Love",value:"Sweet+Love"},{label:"Sweet Pampering",value:"Sweet+Pampering"},{label:"sweet pet",value:"sweet+pet"},{label:"Sweet Romance",value:"Sweet+Romance"},{label:"Sweet Story",value:"Sweet+Story"},{label:"SweetNovel",value:"SweetNovel"},{label:"system",value:"system"},{label:"Team Work",value:"Team+Work"},{label:"Terminal Illness",value:"Terminal+Illness"},{label:"Thriller",value:"Thriller"},{label:"Time",value:"Time"},{label:"Time Travel",value:"Time+Travel"},{label:"Tragedy",value:"Tragedy"},{label:"Transformation",value:"Transformation"},{label:"Transmigration",value:"Transmigration"},{label:"Travel",value:"Travel"},{label:"Unconditional Love",value:"Unconditional+Love"},{label:"Undercover",value:"Undercover"},{label:"Unlimited Flow",value:"Unlimited+Flow"},{label:"Unlucky",value:"Unlucky"},{label:"Unrequited Love",value:"Unrequited+Love"},{label:"Urban",value:"Urban"},{label:"Urban Fantasy",value:"Urban+Fantasy"},{label:"urban life",value:"urban+life"},{label:"Urban Love",value:"Urban+Love"},{label:"Villain",value:"Villain"},{label:"Weak to Strong",value:"Weak+to+Strong"},{label:"Wealthy CEO",value:"Wealthy+CEO"},{label:"wealthy characters",value:"wealthy+characters"},{label:"Wealthy Family",value:"Wealthy+Family"},{label:"Wise",value:"Wise"},{label:"workplace",value:"workplace"},{label:"Wuxia",value:"Wuxia"},{label:"Xianxia",value:"Xianxia"},{label:"Xuanhuan",value:"Xuanhuan"},{label:"yandere",value:"yandere"},{label:"Yandere Character",value:"Yandere+Character"},{label:"Yaoi",value:"Yaoi"},{label:"Younger Love Interest",value:"Younger+Love+Interest"},{label:"Yuri",value:"Yuri"},{label:"Zombie",value:"Zombie"}],type:t.FilterTypes.CheckboxGroup}}}return u.prototype.parseNovels=function(t){return e(this,void 0,void 0,(function(){var e,i,o,u,n;return l(this,(function(l){switch(l.label){case 0:return e=[],[4,(0,a.fetchApi)(t)];case 1:return[4,l.sent().json()];case 2:for(i=l.sent(),o=0,u=i;o<u.length;o++)n=u[o],e.push({name:(0,r.load)(n.title).text(),path:n.permalink.replace(this.site,""),cover:n.novelImage});return[2,e]}}))}))},u.prototype.popularNovels=function(a,t){return e(this,arguments,void 0,(function(e,a){var t,r,i=a.showLatestNovels,o=a.filters;return l(this,(function(l){return t="".concat(this.site,"wp-json/fiction/v1/novels/?"),(r=new URLSearchParams).set("page",e.toString()),r.set("novelstatus",""),r.set("term",""),r.set("orderby",""),r.set("order",""),r.set("query",""),i?(r.set("orderby","date"),r.set("order","desc")):o&&(r.set("order",o.order.value),r.set("orderby",o.sort.value),r.set("novelstatus",o.status.value),r.delete("term"),t+="term=".concat(o.genres.value.join("*"),"&")),[2,this.parseNovels(t+r.toString())]}))}))},u.prototype.parseNovel=function(t){return e(this,void 0,void 0,(function(){var e,u,n,s,v,b,c,d,h,m,g,p,y,S,f,C,F,M;return l(this,(function(l){switch(l.label){case 0:return[4,(0,a.fetchApi)(this.site+t)];case 1:return[4,l.sent().text()];case 2:switch(e=l.sent(),u=(0,r.load)(e),(n={path:t,name:(null===(S=u("body > :nth-child(2) > :nth-child(2) > :nth-child(2)"))||void 0===S?void 0:S.text())||"Untitled",cover:(null===(f=u("body > :nth-child(2) > :first-child"))||void 0===f?void 0:f.attr("src"))||i.defaultCover,author:(null===(F=null===(C=u("body > :nth-child(2) > :nth-child(2) > :nth-child(3) > :nth-child(3)"))||void 0===C?void 0:C.text())||void 0===F?void 0:F.replace("Author: ",""))||"Unknown"}).genres=u("body > :nth-child(2) > :nth-child(2) > :nth-child(4) a").map((function(e,l){return u(l).text()})).toArray().join(","),null===(M=u("body > :nth-child(2) > :nth-child(2) > :first-child > p"))||void 0===M?void 0:M.text()){case"Completed":n.status=o.NovelStatus.Completed;break;case"Dropped":n.status=o.NovelStatus.Cancelled;break;case"Hiatus":n.status=o.NovelStatus.OnHiatus;break;case"Ongoing":n.status=o.NovelStatus.Ongoing;break;default:n.status=o.NovelStatus.Unknown}n.summary=u("body > :nth-child(4) > :nth-child(2) p").map((function(e,l){return u(l).text()})).toArray().join("\n"),s=[],v=u("#chapterList").attr("data-cat"),b=1,c=1,l.label=3;case 3:return c<=b?[4,(0,a.fetchApi)("".concat(this.site,"wp-json/fiction/v1/chapters?category=").concat(v,"&order=asc&page=").concat(c,"&per_page=1000"))]:[3,7];case 4:return d=l.sent(),b=parseInt(d.headers.get("x-wp-totalpages")||"1"),[4,d.json()];case 5:for(h=l.sent(),m=0,g=h;m<g.length;m++)p=g[m],y={name:(0,r.load)(p.title).text(),path:p.permalink.replace(this.site,"")},s.push(y);l.label=6;case 6:return c++,[3,3];case 7:return n.chapters=s,[2,n]}}))}))},u.prototype.parseChapter=function(t){return e(this,void 0,void 0,(function(){var e,i;return l(this,(function(l){switch(l.label){case 0:return[4,(0,a.fetchApi)(this.site+t)];case 1:return[4,l.sent().text()];case 2:return e=l.sent(),i=(0,r.load)(e),[2,i("div.contenta").html()||""]}}))}))},u.prototype.searchNovels=function(a,t){return e(this,void 0,void 0,(function(){var e,r;return l(this,(function(l){return e="".concat(this.site,"wp-json/fiction/v1/novels/?"),(r=new URLSearchParams).set("page",t.toString()),r.set("novelstatus",""),r.set("term",""),r.set("orderby",""),r.set("order",""),r.set("query",a),[2,this.parseNovels(e+r.toString())]}))}))},u}();exports.default=new u;